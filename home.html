
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Test</title>
</head>
<body>
    <input id="texto" type="button" value="Imprimir Teste" style="width: 50%; height: 50px;"><br>
    <input id="qrcode" type="button" value="Imprimir QRCode" style="width: 50%; height: 50px;"><br>
    <input id="status" type="button" value="Status Impressora" style="width: 50%; height: 50px;"><br>
    <input id="abre" type="button" value="Abre Conexao" style="width: 50%; height: 50px;"><br>
    <input id="fecha" type="button" value="Fecha Conexao" style="width: 50%; height: 50px;"><br>
    <input id="qrcode-solo" type="button" value="Imprimir QRCode Solo" style="width: 50%; height: 50px;"><br>
    <input id="texto-solo" type="button" value="Imprimir Texto Solo" style="width: 50%; height: 50px;"><br>
    <input id="abre-gaveta" type="button" value="Abre Gaveta" style="width: 50%; height: 50px;"><br>
    <input id="corte" type="button" value="Corte" style="width: 50%; height: 50px;"><br>
    <input id="avanca" type="button" value="Avanca Papel" style="width: 50%; height: 50px;"><br>
    <input id="cupomtef" type="button" value="Cupom Tef" style="width: 50%; height: 50px;"><br>
    <ul id="list">
        <li>resultados:</li>
    </ul>
    <script>
        document.querySelector('#texto').addEventListener('click', testeImpressaoTexto)
        document.querySelector('#qrcode').addEventListener('click', testeImpressaoQRCode)
        document.querySelector('#status').addEventListener('click', testeStatusImpressora)
        document.querySelector('#abre').addEventListener('click', testeAbreConexao)
        document.querySelector('#fecha').addEventListener('click', testeFechaConexao)
        document.querySelector('#qrcode-solo').addEventListener('click', testeImpressaoQRCodeSolo)
        document.querySelector('#texto-solo').addEventListener('click', testeImpressaoTextoSolo)
        document.querySelector('#abre-gaveta').addEventListener('click', testeAbreGaveta)
        document.querySelector('#corte').addEventListener('click', testeCorte)
        document.querySelector('#avanca').addEventListener('click', testeAvancaPapel)
        document.querySelector('#cupomtef').addEventListener('click', testeImprimeCupomTEF)

        function addLi(text) {
            let ul = document.getElementById("list");
            let li = document.createElement("li");
            li.appendChild(document.createTextNode(text));
            ul.appendChild(li);
        }

        function removeLis() {
            document.getElementById("list").innerHTML = "";
        }

        function testeAbreConexao() {
            removeLis()
            addLi('bora lá')
            let args = JSON.stringify({ tipo: 5, modelo: '', conexao: '', parametro: 0 })
            let result = Termica.AbreConexaoImpressora(args)
            addLi('abreconexaoimpressora')
            addLi(`result: ${result}`)
        }

        function testeFechaConexao() {
            removeLis()
            result = Termica.FechaConexaoImpressora(JSON.stringify({}))
            addLi('fecha')
            addLi(`result: ${result}`)
        }

        function testeImpressaoTexto() {
            removeLis()
            addLi('bora lá')
            let args = JSON.stringify({ tipo: 5, modelo: '', conexao: '', parametro: 0 })
            let result = Termica.AbreConexaoImpressora(args)
            addLi('abreconexaoimpressora')
            addLi(`result: ${result}`)
    
            args = JSON.stringify({ dados : 'Elgin Developers Community From Web App', 
                                    alinhamento: 0, 
                                    stilo: 0, 
                                    tamanho: 17 })
            result = Termica.ImpressaoTexto(args)
            addLi('impressao texto')
            addLi(`result: ${result}`)
    
            result = Termica.Corte(JSON.stringify({ avanco : 10 }))
            addLi('corte')
            addLi(`result: ${result}`)

            result = Termica.FechaConexaoImpressora(JSON.stringify({}))
            addLi('fecha')
            addLi(`result: ${result}`)
        }

        function testeImpressaoQRCode() {
            removeLis()
            addLi('bora lá')
            let args = JSON.stringify({ tipo: 5, modelo: '', conexao: '', parametro: 0 })
            let result = Termica.AbreConexaoImpressora(args)
            addLi('abreconexaoimpressora')
            addLi(`result: ${result}`)
    
            args = JSON.stringify({ dados: 'https://web-app-experience.herokuapp.com/', 
                                    tamanho: 4, 
                                    nivelCorrecao: 2 })
            result = Termica.ImpressaoQRCode(args)
            addLi('impressao texto')
            addLi(`result: ${result}`)
    
            result = Termica.Corte(JSON.stringify({ avanco : 10 }))
            addLi('corte')
            addLi(`result: ${result}`)

            result = Termica.FechaConexaoImpressora(JSON.stringify({}))
            addLi('fecha')
            addLi(`result: ${result}`)
        }

        function testeStatusImpressora() {
            removeLis()
            addLi('bora lá')
            let args = JSON.stringify({ tipo: 5, modelo: '', conexao: '', parametro: 0 })
            let result = Termica.AbreConexaoImpressora(args)
            addLi('abreconexaoimpressora')
            addLi(`result: ${result}`)
    
            args = JSON.stringify({ param: 3 })
            result = Termica.StatusImpressora(args)
            addLi('statusimpressora')
            addLi(`result: ${result}`)

            result = Termica.FechaConexaoImpressora(JSON.stringify({}))
            addLi('fecha')
            addLi(`result: ${result}`)
        }

        function testeImpressaoTextoSolo() {
            removeLis()
            args = JSON.stringify({ dados : 'Elgin Developers Community From Web App', 
                                    alinhamento: 0, 
                                    stilo: 0, 
                                    tamanho: 17 })
            result = Termica.ImpressaoTexto(args)
            addLi('impressao texto')
            addLi(`result: ${result}`)
        }

        function testeImpressaoQRCodeSolo() {
            removelis()
            args = json.stringify({ dados: 'https://web-app-experience.herokuapp.com/', 
                                    tamanho: 4, 
                                    nivelcorrecao: 2 })
            result = Termica.ImpressaoQRCode(args)
            addli('impressao qrcode solo')
            addli(`result: ${result}`)
        }

        function testeAbreGaveta() {
            removelis()
            args = json.stringify({ })
            result = Termica.AbreGavetaElgin(args)
            addli('teste gaveta')
            addli(`result: ${result}`)
        }

        function testeCorte() {
            removeLis()
            result = Termica.Corte(JSON.stringify({ avanco : 10 }))
            addLi('corte')
            addLi(`result: ${result}`)
        }

        function testeAvancaPapel() {
            removeLis()
            result = Termica.AvancaPapel(JSON.stringify({ linhas : 10 }))
            addLi('avancapapel')
            addLi(`result: ${result}`)
        }

        function testeImprimeCupomTEF() {
            let cupom = '000-000 = CRT\n 001-000 = 1\n 002-000 = 123456\n 003-000 = 4500\n 010-000 = ELECTRON\n 010-001 = 103\n 010-003 = 21\n 010-004 = 417402\n 010-005 = 7578\n 011-000 = 03603511027\n 012-000 = 001315\n 013-000 = 001315\n 018-000 = 01\n 022-000 = 0326\n 023-000 = 192414\n 028-000 = 37\n 029-001 = ELGIN PAY TESTE BANRISUL\n 029-002 = 92.702.067/0001-96   \n 029-003 = R CAPITAO MONTANHA, 177\n 029-004 = CENTRO PORTO ALEGRE RS\n 029-005 = \n 029-006 = \n 029-007 = \n 029-008 = \n 029-009 =                  REDE                 \n 029-010 = \n 029-011 = REDESHOP  -      OKI                  \n 029-012 = \n 029-013 = \n 029-014 = COMPROV: 123456789 VALOR: 45,00\n 029-015 = \n 029-016 = ESTAB:013932594 SCOPE TESTE SIMULADO  \n 029-017 = DD.MM.AA-HH:MM:SS TERM:PV123456/pppnnn\n 029-018 = CARTAO: ************7578\n 029-019 = AUTORIZACAO: 123456                   \n 029-020 = ARQC:36DEFEF9D3490BC5\n 029-021 = \n 029-022 = **************************************\n 029-023 =          D E M O N S T R A C A O      \n 029-024 =  Transacao sem validade para reembolso\n 029-025 =     Autorizacao gerada por simulador  \n 029-026 = **************************************\n 029-027 = \n 029-028 =     TRANSACAO AUTORIZADA MEDIANTE     \n 029-029 =         USO DE SENHA PESSOAL.         \n 029-030 =                                       \n 029-031 = 0\n 029-032 = CONTROLE 03603511027  OKI BRASIL SCOPE\n 029-033 = \n 029-034 = \n 029-035 = \n 029-036 = \n 029-037 = \n 030-000 = Transação Finalizada com Sucesso\n 043-000 = SIMULADOR\n 047-000 = 00\n 050-000 = 000\n 150-000 = 000000000000002\n 210-004 = 4174020000007578=25080000000000000000\n 210-052 = 001\n 210-052 = 001\n 300-001 = 0825\n 600-000 = 01425787000104\n 701-016 = 0326\n 999-999 = 0'
            removeLis()
            result = Termica.ImprimeCupomTEF(JSON.stringify({ dados : cupom }))
            addLi('cupomtef')
            addLi(`result: ${result}`)
        }

    </script>
</body>
</html>